## Обзор проекта
Данный проект — это контейнеризированное Python-приложение, использующее библиотеку GDAL для обработки геопространственных данных. Приложение построено на Flask и включает в себя функциональность для загрузки, обработки и отображения результатов обработки данных. 

## Структура проекта
### app.py:
Основной файл приложения, который содержит маршруты (routes) и логику обработки запросов. Здесь реализованы основные API для загрузки данных, запуска обработки и получения результатов.

### config.py:
Файл конфигурации, содержащий настройки приложения, такие как параметры для подключения к базе данных, пути к файлам, настройки логирования и другие важные параметры, которые могут изменяться в зависимости от окружения (например, разработка или продакшн).

### detection.py:
Модуль, отвечающий за обработку данных и выполнение детекции. Здесь реализованы алгоритмы обработки геопространственных данных с использованием библиотеки GDAL, а также функции для работы с предобученной моделью, которая используется для анализа данных.

### main.py:
Точка входа в приложение. Этот файл запускает Flask-сервер и инициализирует необходимые компоненты приложения. Он также может содержать логику для обработки командной строки или конфигурации сервера.

### requirements.txt:
Список зависимостей Python, необходимых для работы приложения. Этот файл позволяет легко установить все необходимые библиотеки с помощью команды pip install -r requirements.txt.

### test_app.py:
Модуль для тестирования приложения. Содержит набор тестов, написанных с использованием библиотеки unittest, для проверки корректности работы различных компонентов приложения, таких как маршруты, обработка данных и API.

### Dockerfile:
Файл для сборки Docker-образа приложения. Содержит инструкции для создания контейнера, включая установку зависимостей, копирование файлов приложения и настройку окружения.

### docker-compose.yml:
Файл для управления многоконтейнерными приложениями. Позволяет легко запускать и останавливать все необходимые контейнеры (например, базу данных, веб-сервер и другие сервисы), а также настраивать их взаимодействие.

### model.pt:
Предобученная модель для детекции, используемая в приложении. Этот файл содержит веса и архитектуру модели, которые позволяют выполнять анализ данных на основе машинного обучения.

## Настройка CI/CD
Этот проект использует GitHub Actions для автоматического развертывания на Yandex Cloud VM. Чтобы настроить CI/CD, выполните следующие шаги:

- Создайте SSH-ключи и добавьте публичный ключ на вашу ВМ.

- Добавьте приватный ключ в GitHub Secrets вашего репозитория под именем SSH_PRIVATE_KEY.

- Настройте файл .github/workflows/deploy.yml с конфигурацией, приведенной ниже:

name: Deploy to Yandex Cloud VM

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up SSH
      run: |
        echo "${{ secrets.SSH_PRIVATE_KEY }}" > private_key
        chmod 600 private_key
        mkdir -p ~/.ssh
        echo "StrictHostKeyChecking no" >> ~/.ssh/config

    - name: Deploy to VM
      run: |
        ssh -i private_key username@your-vm-ip << 'EOF'
          cd /SoftwareEngineering_URFU_2025
          git pull origin main
          docker-compose down
          docker-compose up -d --build
        EOF

## Как запустить проект 1 способ (нужен Python 3.10):

### 1. Создание виртуального окружения

```bash
python3 -m venv venv
source venv/bin/activate
```

### 2. Установить библиотеки

```bash
pip install -r requirements.txt
```

### 3. Установить GDAL

#### Для Windows
```bash
pip install GDAL-3.10.1-cp310-cp310-win_amd64.whl
```
#### Для MacOS
```bash
brew install gdal
```

### 4. Запустить файл main.py и перейти по ссылке

```bash
Running on [ссылка]
```

## Как запустить проект 2 способ (нужна программа Docker):

### 1. Запустить Docker

### 2. Сбилдить контейнер

```bash
docker build -t mykurgan-app .
```

### 3. Запустить контейнер

```bash
docker run -p 8080:8080 mykurgan-app 
```

### 4. Перейти по ссылке

```bash
Running on [ссылка]
```

### Прочее

Если во время работы происходит ошибка скорее всего не хватает ОЗУ эмуляции WSL2:

1. По этому пути создать файл .wslconfig
"C:\Users\пользователь\"

2. Заполнем его, прописывая сколько мы выделяем производительности эмуляции WSL2
В моем слчае это вот так:
 
[wsl2]
memory=16GB
processors=16

3. Далее программа Docker попросит перезагрузку, перезагружаем, и заново запускаем.

Директория ./static  - хранит .csv файл с найдеными курганами и сгенерированой 2д картой их расположения

Директория ./uploads - хранит загруженый .acs файл
